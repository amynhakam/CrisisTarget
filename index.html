<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CrisisTarget - Global Humanitarian Crises</title>
  <meta name="description" content="Interactive map visualizing global humanitarian crises and connecting donors with verified charities.">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
        crossorigin="">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/map.css">
  <link rel="stylesheet" href="css/filters.css">
  <link rel="stylesheet" href="css/modal.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header__brand">
      <span class="header__icon">ÔøΩ</span>
      <h1 class="header__title">CrisisTarget</h1>
    </div>
    <div class="header__actions">
      <button id="toggle-filters-btn" class="btn btn--icon" aria-label="Toggle filters">
        <span>üîç</span>
      </button>
      <button id="refresh-btn" class="btn btn--secondary">
        <span class="btn__icon">üîÑ</span>
        <span class="btn__text">Refresh Data</span>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <!-- Filter Panel (Sidebar) -->
    <aside id="filter-panel" class="filter-panel">
      <div class="filter-panel__header">
        <h2>Filters</h2>
        <button id="reset-filters-btn" class="btn btn--text">Reset All</button>
      </div>

      <!-- Crisis Type Filter -->
      <section class="filter-section">
        <h3 class="filter-section__title">Crisis Type</h3>
        <div class="filter-checkboxes">
          <label class="checkbox-label">
            <input type="checkbox" name="crisis-type" value="conflict" checked>
            <span class="checkbox-icon">‚öîÔ∏è</span>
            <span>Armed Conflict</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="crisis-type" value="natural_disaster" checked>
            <span class="checkbox-icon">üíß</span>
            <span>Natural Disaster</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="crisis-type" value="famine" checked>
            <span class="checkbox-icon">üçΩÔ∏è</span>
            <span>Famine</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="crisis-type" value="disease" checked>
            <span class="checkbox-icon">ü¶†</span>
            <span>Disease Outbreak</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="crisis-type" value="refugee" checked>
            <span class="checkbox-icon">üß≥</span>
            <span>Refugee Crisis</span>
          </label>
        </div>
      </section>

      <!-- Region Filter -->
      <section class="filter-section">
        <h3 class="filter-section__title">Region</h3>
        <div class="filter-checkboxes">
          <label class="checkbox-label">
            <input type="checkbox" name="region" value="africa" checked>
            <span>Africa</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="region" value="asia" checked>
            <span>Asia</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="region" value="europe" checked>
            <span>Europe</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="region" value="middle_east" checked>
            <span>Middle East</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="region" value="americas" checked>
            <span>Americas</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="region" value="oceania" checked>
            <span>Oceania</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="region" value="global" checked>
            <span>Global</span>
          </label>
        </div>
      </section>

      <!-- Urgency Filter -->
      <section class="filter-section">
        <h3 class="filter-section__title">Urgency Level</h3>
        <div class="urgency-slider">
          <div class="urgency-labels">
            <span>1 - Monitoring</span>
            <span>5 - Critical</span>
          </div>
          <input type="range" id="urgency-min" min="1" max="5" value="1" class="slider">
          <div class="urgency-value">
            Showing: <span id="urgency-display">1 - 5</span>
          </div>
        </div>
      </section>

      <!-- Stats -->
      <section class="filter-section filter-stats">
        <div class="stat">
          <span class="stat__value" id="crisis-count">0</span>
          <span class="stat__label">Crises Shown</span>
        </div>
      </section>
    </aside>

    <!-- Map Container -->
    <div class="map-wrapper">
      <div id="map-container" class="map-container">
        <div id="crisis-map"></div>
      </div>

      <!-- Map Legend -->
      <div id="map-legend" class="map-legend">
        <h4 class="map-legend__title">Urgency Level</h4>
        <div class="map-legend__items">
          <div class="legend-item">
            <span class="legend-color" style="background: #FFEB3B;"></span>
            <span>1 - Monitoring</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background: #FFC107;"></span>
            <span>2 - Elevated</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background: #FF9800;"></span>
            <span>3 - High</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background: #FF5722;"></span>
            <span>4 - Severe</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background: #F44336;"></span>
            <span>5 - Critical</span>
          </div>
        </div>
      </div>

      <!-- Data Status Indicator -->
      <div id="data-status" class="data-status hidden">
        <span class="data-status__icon">‚ÑπÔ∏è</span>
        <span class="data-status__text">Using cached data</span>
      </div>
    </div>
  </main>

  <!-- Crisis Modal -->
  <div id="crisis-modal" class="modal hidden">
    <div class="modal__overlay"></div>
    <div class="modal__content">
      <button class="modal__close" aria-label="Close modal">&times;</button>
      
      <header class="modal__header">
        <span id="modal-icon" class="modal__icon">‚öîÔ∏è</span>
        <div class="modal__header-text">
          <h2 id="modal-title" class="modal__title">Crisis Name</h2>
          <span id="modal-location" class="modal__location">Country, Region</span>
        </div>
      </header>

      <div class="modal__meta">
        <span id="modal-urgency" class="urgency-badge urgency-5">Critical</span>
        <span id="modal-type" class="type-badge">Armed Conflict</span>
        <span id="modal-affected" class="affected-badge">
          <span class="affected-icon">üë•</span>
          <span id="modal-affected-count">0</span> affected
        </span>
      </div>

      <div class="modal__body">
        <p id="modal-description" class="crisis-description">
          Crisis description goes here...
        </p>
        
        <div class="crisis-dates">
          <span><strong>Started:</strong> <span id="modal-start-date">-</span></span>
          <span><strong>Updated:</strong> <span id="modal-updated-date">-</span></span>
        </div>
      </div>

      <div class="modal__charities">
        <h3 class="charities-title">
          <span>üíù</span> Support These Organizations
        </h3>
        <div id="charity-list" class="charity-list">
          <!-- Charity cards inserted dynamically -->
        </div>
        <p id="no-charities" class="no-charities hidden">
          No verified charities found for this crisis.
        </p>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading hidden">
    <div class="loading__spinner"></div>
    <span class="loading__text">Loading crisis data...</span>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
          crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

  <!-- App Scripts -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/crisisData.js"></script>
  <script src="js/charityData.js"></script>
  <script src="js/map.js"></script>
  <script src="js/modal.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
